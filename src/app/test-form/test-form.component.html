<p>test-form works!</p>


<form [formGroup]="gradeHistoryForm" (ngSubmit) = "onSubmit()"  >
    <mat-card>
    <mat-form-field appearance="outline"  >
        <mat-label> Class ID</mat-label>
        <input id="class_id"  type="text" matInput formControlName="class_id" >
        <mat-hint>Must be at least 3 chars</mat-hint>
    </mat-form-field>
    <mat-form-field appearance="outline" >
        <mat-label > Student ID</mat-label>
        <input id="student_id" matInput type="student_id" formControlName="student_id" >
    </mat-form-field>
  
    <div formArrayName="grades">
        @for (grade of grades.controls; track grade ;  let i=$index; ){
            <div [formGroupName]="i"> 
                <label for="score-{{ i }}">score {{i+1}}:</label>
                <input id="score-{{ i }}" type="number" formControlName="score">
              <label for="type-{{ i }}">Type {{i+1}}:</label>
                <input id="type-{{ i }}" type="text" formControlName="type"> 
                            
                  <button type="button"   (click)="removeGrade(i)">Remove</button>
            </div>


        }
    </div>

    <div >
        @if (grades.invalid && grades.touched)
        {
        Issues with the grades
        }
    </div>
    
    <div >
        @if (class_id?.invalid && class_id?.touched)
        {
        Class ID is required and must be at least 3 letters
        }
    </div>



    <!-- <h2>Next Set</h2>

   <div formArrayName="grades">
            <div *ngFor="let grade of grades.controls; let i = index" >
            <div  [formGroupName]="i"> 
                <label for="score-{{ i }}">score {{i+1}}:</label>
                <input id="score-{{ i }}" type="text" formControlName="score">
                <label for="type-{{ i }}">Type {{i+1}}:</label>
                <input id="type-{{ i }}" type="text" formControlName="type"> 
                         
                  <button type="button"   (click)="removeGrade(i)">Remove</button>
                </div>
                </div>
    </div> -->

    <button type="submit" [disabled]="gradeHistoryForm.invalid" >Submit</button>

    <button  type="button" (click)="addGrade()">Add Grade</button>
    </mat-card>
</form>