

<form [formGroup]="gradeHistoryForm" (ngSubmit) = "onSubmit()"  >
    <mat-card>

        <mat-card-header>
            <h2>Enter Student and Class Information</h2>
        </mat-card-header>
        <mat-card-content>

    <mat-form-field appearance="outline"  >
        <mat-label> Class ID</mat-label>
        <input id="class_id"  type="text" matInput formControlName="class_id" >
        <mat-hint>Must be at least 3 chars</mat-hint>
    </mat-form-field>
    <mat-form-field appearance="outline" >
        <mat-label > Student ID</mat-label>
        <input id="student_id" matInput type="student_id" formControlName="student_id" >
    </mat-form-field>

  
    <div formArrayName="grades" >
        @for (grade of grades.controls; track grade ;  let i=$index; ){
            <div [formGroupName]="i"> 
                <fieldset>
                    <legend>Assessment type and score {{i+1}}</legend>
            <mat-form-field>
                <mat-label>Score</mat-label>
                <input matInput type="number" formControlName="score" />
            </mat-form-field>
            <mat-form-field>
                <mat-label >Type</mat-label>
                <input matInput id="type-{{ i }}" type="text" formControlName="type"> 
            </mat-form-field >          
                  <button mat-button="button" 
                  aria-label="Remove item"  (click)="removeGrade(i)">
                    <mat-icon>delete</mat-icon>
                    Remove</button>
                </fieldset>
            </div>


        }
    </div>

    <div >
        @if (grades.invalid && grades.touched)
        {
        Issues with the grades
        }
    </div>
    

<div>

</div>

 

    <!-- <h2>Next Set</h2>

   <div formArrayName="grades">
            <div *ngFor="let grade of grades.controls; let i = index" >
            <div  [formGroupName]="i"> 
                <label for="score-{{ i }}">score {{i+1}}:</label>
                <input id="score-{{ i }}" type="text" formControlName="score">
                <label for="type-{{ i }}">Type {{i+1}}:</label>
                <input id="type-{{ i }}" type="text" formControlName="type"> 
                         
                  <button type="button"   (click)="removeGrade(i)">Remove</button>
                </div>
                </div>
    </div> -->

    

   
    </mat-card-content>
<mat-card-actions>
    <button  type="button" mat-button (click)="addGrade()">Add Grade</button>
    <button type="submit" mat-raised-button [disabled]="gradeHistoryForm.invalid" >Submit</button>
   
    </mat-card-actions>
    </mat-card>
</form>